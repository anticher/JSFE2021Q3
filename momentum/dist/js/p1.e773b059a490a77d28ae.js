(()=>{"use strict";let t={data:{language:"english",weatherLanguage:"en",photoSource:"github",userName:"",city:"",settingsInputsStatus:{languageButtons:{englishLanguageButton:!0,russianLanguageButton:!1},sourceButtons:{gitHubSourceButton:!0,unsplashSourceButton:!1,flickrSourceButton:!1},sourceTagInput:"",sourceTagInputBlock:"true",weatherHideButton:!0,playerHideButton:!1,timeHideButton:!0,dateHideButton:!0,greetingHideButton:!0,quotesHideButton:!0}},setStateLanguage(t){"russian"===t?(this.data.language="russian",this.data.weatherLanguage="ru",console.log(this.data.weatherLanguage)):(this.data.language="english",this.data.weatherLanguage="en",console.log(this.data.weatherLanguage))},setStateUserName(t){this.data.userName=t},setStateCity(t){this.data.city=t},setStatePhotoSource(t){this.data.photoSource=t,console.log(this.data.photoSource)},setStatePhotoTag(t){this.data.settingsInputsStatus.sourceTagInput=t,console.log(this.data.settingsInputsStatus.sourceTagInput)},setStatePhotoTagBlock(t){this.data.settingsInputsStatus.sourceTagInputBlock=t}};const e={english:{"Good Afternoon":"Good afternoon","Good Evening":"Good evening","Good Night":"Good night","Good Morning":"Good morning",PlaceHolder:"[Enter name]"},russian:{"Good Afternoon":"Добрый день","Good Evening":"Добрый вечер","Good Night":"Доброй ночи","Good Morning":"Доброе утро",PlaceHolder:"[Введите имя]"}},n=document.querySelector(".date"),a=document.querySelector(".time"),o=document.querySelector(".greeting"),s=document.querySelector(".name");let u,c=new Date;function r(t){i(),function(t){const n=`Good ${d()}`;o.textContent=e[t][n],s.placeholder=e[t].PlaceHolder}(t),function(t){const e={weekday:"long",month:"long",day:"numeric"};if("english"===t){const t=c.toLocaleDateString("en-En",e);n.textContent=t}else if("russian"===t){const t=c.toLocaleDateString("ru-Ru",e);n.textContent=t}}(t)}function i(){const t=(new Date).toLocaleTimeString();a.textContent=t,setTimeout(i,1e3)}function d(){const t=c.getHours();return t<=5?"Night":t<=11?"Morning":t<=17?"Afternoon":t<=23?"Evening":void 0}const l=document.querySelector("body");function g(t){return Math.floor(Math.random()*t)+1}async function h(e){let n=d().toLowerCase();const a=new Image;if(u||(u=g(20)),"github"===e){const e=u.toString().padStart(2,"0");a.src=`https://raw.githubusercontent.com/anticher/stage1-tasks/assets/images/${n}/${e}.jpg`,t.setStatePhotoTagBlock(!0)}else if(t.setStatePhotoTagBlock(!1),""!==t.data.settingsInputsStatus.sourceTagInput&&(n=t.data.settingsInputsStatus.sourceTagInput),"unsplash"===e){const t=`https://api.unsplash.com/photos/random?orientation=landscape&query=${n}&client_id=aoX0rDfQk1G2xigkewYXnpqSgjlV1kHW8YLBVAT5CkY`,e=await fetch(t),o=await e.json();a.src=o.urls.regular}else if("flickr"===e){let t=g(100);const e=`https://www.flickr.com/services/rest/?method=flickr.photos.search&api_key=b71a9c1cb303457bc8491e750660b116&orientation=landscape&tags=${n}&extras=url_h,%20url_l&format=json&nojsoncallback=1`,o=await fetch(e),s=await o.json();console.log(e),s.photos.photo[t].url_h?a.src=s.photos.photo[t].url_h:a.src=s.photos.photo[t].url_l}a.onload=()=>{l.style.backgroundImage=`url(${a.src})`}}const m=document.querySelector(".slide-prev"),p=document.querySelector(".slide-next");function S(){p.disabled=!0,m.disabled=!0}function y(){setTimeout((function(){p.disabled=!1,m.disabled=!1}),1500)}const v=document.querySelector(".quote"),L=document.querySelector(".author"),f=document.querySelector(".change-quote");async function w(t){const e=`../assets/data/${t}QuotesData.json`,n=await fetch(e),a=await n.json(),o=(s=a.length,Math.floor(Math.random()*s));var s;v.textContent=a[o].text,L.textContent=a[o].author}const k=document.querySelector(".weather-icon"),q=document.querySelector(".temperature"),E=document.querySelector(".wind"),b=document.querySelector(".humidity"),I=document.querySelector(".weather-description"),B=document.querySelector(".weather-error"),C=document.querySelector(".city");async function T(t){const e=`https://api.openweathermap.org/data/2.5/weather?q=${C.value}&lang=${t}&appid=abe902bf94114fcd5fea4eb6170592ab&units=metric`,n=await fetch(e),a=await n.json();a.cod>=400?(B.textContent="ru"===t?"Название города введено некорректно":"Wrong city name",k.className="",E.textContent="",b.textContent="",q.textContent="",I.textContent=""):(B.textContent="",k.className="weather-icon owf",k.classList.add(`owf-${a.weather[0].id}`),q.textContent=`${Math.ceil(a.main.temp)}°C`,I.textContent=a.weather[0].description,"en"===t?(E.textContent=`Wind speed: ${Math.ceil(a.wind.speed)} m/s`,b.textContent=`Humidity: ${a.main.humidity}%`):"ru"===t&&(E.textContent=`Скорость ветра: ${Math.ceil(a.wind.speed)} м/с`,b.textContent=`Влажность: ${a.main.humidity}%`))}const x=[{author:"Sensorica",title:"Aqua Caelestis",src:"../assets/sounds/Aqua Caelestis.mp3",duration:"00:40"},{author:"Yiruma",title:"River Flows In You",src:"../assets/sounds/River Flows In You.mp3",duration:"01:37"},{author:"Summer Wind",title:"Summer Wind",src:"../assets/sounds/Summer Wind.mp3",duration:"01:51"},{author:"Ennio Morricone",title:"Ennio Morricone",src:"../assets/sounds/Ennio Morricone.mp3",duration:"01:37"}],H=document.querySelector(".play-current"),$=document.querySelector(".play-next"),G=document.querySelector(".play-prev"),M=new Audio,P=document.querySelector(".play-list"),N=document.querySelector(".progress-bar-track-name");let j,A=!1,D=0;function W(){M.src=x[D].src,M.currentTime=0,N.textContent=`${D+1}. ${x[D].author} - ${x[D].title}`}function _(){M.currentTime||W(),M.play(),O(),H.classList.add("pause"),j.classList.add("pause"),A=!0}function Y(){M.pause(),M.currentTime=0,H.classList.remove("pause"),j.classList.remove("pause"),A=!1}function F(){A?(M.pause(),H.classList.remove("pause"),j.classList.remove("pause"),A=!1):_()}function Q(){Y(),D<x.length-1?D++:D=0,O(),_()}function R(){this.dataset.trackNumber==D?F():(Y(),D=+this.dataset.trackNumber,O(),_())}function O(){const t=P.querySelectorAll("li");t.forEach((t=>{t.classList.remove("item-active"),t.lastChild.classList.remove("pause"),t.lastChild.classList.remove("play-little")})),t[D].classList.add("item-active"),t[D].lastChild.classList.add("play-little"),j=document.querySelector(".play-little"),j.classList.add("pause")}const U=document.querySelector(".progress-bar"),V=document.querySelector(".progress-current"),X=document.querySelector(".progress-total");function z(t,e=0){t.style.background=`linear-gradient(to right, rgba(255, 255, 255, 0.8) 0%, rgba(255, 255, 255, 0.8) ${e}%, transparent ${e}%, transparent 100%)`}function J(t){t=Math.round(t);let e=Math.floor(t/60)||0,n=t-60*e||0;return e+":"+(n<10?"0":"")+n}U.value=0;const K=document.querySelector(".mute-btn"),Z=document.querySelector(".volume-bar");let tt=0;const et=document.querySelector(".settings-button"),nt=document.querySelector(".settings-window"),at=document.querySelector(".weather"),ot=document.querySelector(".player"),st=document.querySelector(".time"),ut=document.querySelector(".date"),ct=document.querySelector(".greeting-container"),rt=document.querySelector(".quotes"),it=document.querySelector(".radio-english"),dt=document.querySelector(".radio-russian"),lt=document.querySelector("#radioGitHub"),gt=document.querySelector("#radioUnsplash"),ht=document.querySelector("#radioFlickr"),mt=document.querySelector("#inputTag"),pt=document.querySelector("#checkWeather"),St=document.querySelector("#checkPlayer"),yt=document.querySelector("#checkTime"),vt=document.querySelector("#checkDate"),Lt=document.querySelector("#checkGreeting"),ft=document.querySelector("#checkQuotes");function wt(){this===ht?t.setStatePhotoSource("flickr"):this===gt?t.setStatePhotoSource("unsplash"):t.setStatePhotoSource("github"),h(t.data.photoSource)}function kt(){this===dt?t.setStateLanguage("russian"):t.setStateLanguage("english"),r(t.data.language),T(t.data.weatherLanguage),w(t.data.language)}function qt(t,e){t.checked?e.classList.remove("visibility-hidden"):e.classList.add("visibility-hidden")}window.addEventListener("load",(function(){localStorage.getItem("name")?s.value=localStorage.getItem("name"):s.value="",localStorage.getItem("city")&&(C.value=localStorage.getItem("city"))})),window.addEventListener("beforeunload",(function(){localStorage.setItem("name",s.value),localStorage.setItem("city",C.value)})),l.style.backgroundImage="url('https://raw.githubusercontent.com/anticher/stage1-tasks/assets/images/evening/18.jpg')",window.addEventListener("load",h(t.data.photoSource)),window.addEventListener("load",r(t.data.language)),p.addEventListener("click",(()=>{var e;e=t.data.photoSource,u<20?u++:u=1,S(),h(e),y()})),m.addEventListener("click",(()=>{var e;e=t.data.photoSource,u>1?u--:u=20,S(),h(e),y()})),window.addEventListener("load",(x.forEach(((t,e)=>{const n=document.createElement("li");n.classList.add("play-item"),n.textContent=x[e].title;const a=document.createElement("button");a.classList.add("play"),a.classList.add("player-icon"),a.dataset.trackNumber=e,0===e&&a.classList.add("play-little"),a.addEventListener("click",R),n.append(a),P.append(n)})),W(),void(j=document.querySelector(".play-little")))),H.addEventListener("click",F),$.addEventListener("click",Q),G.addEventListener("click",(function(){Y(),D>0?D--:D=x.length-1,O(),_()})),M.addEventListener("ended",Q),z(U),M.ontimeupdate=()=>{V.textContent=J(M.currentTime),X.textContent=J(M.duration),M.duration===M.currentTime&&pauseAudio(),0===M.currentTime?z(U):(U.value=100/M.duration*M.currentTime,z(U,U.value))},U.addEventListener("input",(function(){const t=this.value;M.currentTime=t/(100/M.duration),z(U)})),K.addEventListener("click",(function(){K.classList.contains("muted")?(K.classList.remove("muted"),Z.value=tt,z(Z,tt),M.volume=tt/100):(K.classList.add("muted"),tt=Z.value,Z.value=0,z(Z),M.volume=0)})),M.volume=Z.value/100,z(Z,Z.value),Z.addEventListener("input",(function(){const t=this.value;z(Z,t),M.volume=t/100,tt=t,t>0?K.classList.remove("muted"):K.classList.add("muted")})),C.value||("ru"===t.data.weatherLanguage?C.value="Минск":C.value="Minsk"),window.addEventListener("load",T(t.data.weatherLanguage)),C.addEventListener("change",T(t.data.weatherLanguage)),window.addEventListener("load",w(t.data.language)),f.addEventListener("click",w(t.data.language)),window.addEventListener("load",(function(){!0===t.data.settingsInputsStatus.sourceTagInputBlock?mt.readOnly=!0:mt.readOnly=!1})),et.addEventListener("click",(function(){et.classList.toggle("active"),nt.classList.toggle("active")})),it.addEventListener("click",kt),dt.addEventListener("click",kt),lt.addEventListener("click",wt),gt.addEventListener("click",wt),ht.addEventListener("click",wt),mt.addEventListener("change",(function(){t.setStatePhotoTag(mt.value),h(t.data.photoSource)})),pt.addEventListener("change",(function(){qt(this,at)})),St.addEventListener("change",(function(){qt(this,ot)})),yt.addEventListener("change",(function(){qt(this,st)})),vt.addEventListener("change",(function(){qt(this,ut)})),Lt.addEventListener("change",(function(){qt(this,ct)})),ft.addEventListener("change",(function(){qt(this,rt)})),it.checked=t.data.settingsInputsStatus.languageButtons.englishLanguageButton,dt.checked=t.data.settingsInputsStatus.languageButtons.russianLanguageButton,lt.checked=t.data.settingsInputsStatus.sourceButtons.gitHubSourceButton,gt.checked=t.data.settingsInputsStatus.sourceButtons.unsplashSourceButton,ht.checked=t.data.settingsInputsStatus.sourceButtons.flickrSourceButton,mt.value=t.data.settingsInputsStatus.sourceTagInput,pt.checked=t.data.settingsInputsStatus.weatherHideButton,St.checked=t.data.settingsInputsStatus.playerHideButton,yt.checked=t.data.settingsInputsStatus.timeHideButton,vt.checked=t.data.settingsInputsStatus.dateHideButton,Lt.checked=t.data.settingsInputsStatus.greetingHideButton,ft.checked=t.data.settingsInputsStatus.quotesHideButton})();