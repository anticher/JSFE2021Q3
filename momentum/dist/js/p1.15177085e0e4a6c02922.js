(()=>{"use strict";let e={data:{language:"",weatherLanguage:"",photoSource:"",userName:"",city:"",settingsInputsStatus:{sourceTagInput:"",sourceTagInputBlock:!1}},setStateLanguage(e){"russian"===e?(this.data.language="russian",this.data.weatherLanguage="ru"):(this.data.language="english",this.data.weatherLanguage="en")},setStateUserName(e){this.data.userName=e},setStateCity(e){this.data.city=e},setStatePhotoSource(e){this.data.photoSource=e,console.log(this.data.photoSource)},setStatePhotoTag(e){this.data.settingsInputsStatus.sourceTagInput=e,console.log(this.data.settingsInputsStatus.sourceTagInput)},setStatePhotoTagBlock(e){this.data.settingsInputsStatus.sourceTagInputBlock=e}};const t={english:{"Good Afternoon":"Good afternoon","Good Evening":"Good evening","Good Night":"Good night","Good Morning":"Good morning",PlaceHolder:"[Enter name]"},russian:{"Good Afternoon":"Добрый день","Good Evening":"Добрый вечер","Good Night":"Доброй ночи","Good Morning":"Доброе утро",PlaceHolder:"[Введите имя]"}},a=document.querySelector(".weather-icon"),o=document.querySelector(".temperature"),n=document.querySelector(".wind"),s=document.querySelector(".humidity"),c=document.querySelector(".weather-description"),r=document.querySelector(".weather-error"),u=document.querySelector(".city");async function i(e){const t=`https://api.openweathermap.org/data/2.5/weather?q=${u.value}&lang=${e}&appid=abe902bf94114fcd5fea4eb6170592ab&units=metric`,i=await fetch(t),d=await i.json();d.cod>=400?(r.textContent="ru"===e?"Название города введено некорректно":"Wrong city name",a.className="",n.textContent="",s.textContent="",o.textContent="",c.textContent=""):(r.textContent="",a.className="weather-icon owf",a.classList.add(`owf-${d.weather[0].id}`),o.textContent=`${Math.ceil(d.main.temp)}°C`,c.textContent=d.weather[0].description,"en"===e?(n.textContent=`Wind speed: ${Math.ceil(d.wind.speed)} m/s`,s.textContent=`Humidity: ${d.main.humidity}%`):"ru"===e&&(n.textContent=`Скорость ветра: ${Math.ceil(d.wind.speed)} м/с`,s.textContent=`Влажность: ${d.main.humidity}%`))}const d=document.querySelector(".quote"),l=document.querySelector(".author"),g=document.querySelector(".change-quote");async function h(e){const t=`../assets/data/${e}QuotesData.json`,a=await fetch(t),o=await a.json(),n=(s=o.length,Math.floor(Math.random()*s));var s;d.textContent=o[n].text,l.textContent=o[n].author}const m=document.querySelector(".settings-button"),S=document.querySelector(".settings-window"),p=document.querySelector(".weather"),y=document.querySelector(".player"),v=document.querySelector(".time"),L=document.querySelector(".date"),k=document.querySelector(".greeting-container"),f=document.querySelector(".quotes"),q=document.querySelector("#radioLanguageEnglish"),w=document.querySelector("#radioLanguageRussian"),I=document.querySelector("#radioGitHub"),E=document.querySelector("#radioUnsplash"),b=document.querySelector("#radioFlickr"),T=document.querySelector("#inputTag"),C=document.querySelector("#checkWeather"),x=document.querySelector("#checkPlayer"),B=document.querySelector("#checkTime"),P=document.querySelector("#checkDate"),$=document.querySelector("#checkGreeting"),H=document.querySelector("#checkQuotes");function N(){!0===e.data.settingsInputsStatus.sourceTagInputBlock?(T.disabled=!0,T.value="",e.setStatePhotoTag(T.value)):T.disabled=!1}function G(){this===b?e.setStatePhotoSource("flickr"):this===E?e.setStatePhotoSource("unsplash"):e.setStatePhotoSource("github"),z(e.data.photoSource)}function M(){this===w?e.setStateLanguage("russian"):e.setStateLanguage("english"),U(e.data.language),i(e.data.weatherLanguage),h(e.data.language)}function j(e,t){e.checked?t.classList.remove("visibility-hidden"):t.classList.add("visibility-hidden")}const A=document.querySelector(".date"),D=document.querySelector(".time"),W=document.querySelector(".greeting"),_=document.querySelector(".name");let Y,R=new Date;function U(e){F(),function(e){const a=`Good ${Q()}`;W.textContent=t[e][a],_.placeholder=t[e].PlaceHolder}(e),function(e){const t={weekday:"long",month:"long",day:"numeric"};if("english"===e){const e=R.toLocaleDateString("en-En",t);A.textContent=e}else if("russian"===e){const e=R.toLocaleDateString("ru-Ru",t);A.textContent=e}}(e)}function F(){const e=(new Date).toLocaleTimeString();D.textContent=e,setTimeout(F,1e3)}function Q(){const e=R.getHours();return e<=5?"Night":e<=11?"Morning":e<=17?"Afternoon":e<=23?"Evening":void 0}const V=document.querySelector("body");function X(e){return Math.floor(Math.random()*e)+1}async function z(t){let a=Q().toLowerCase();const o=new Image;if(Y||(Y=X(20)),"github"===t){const t=Y.toString().padStart(2,"0");o.src=`https://raw.githubusercontent.com/anticher/stage1-tasks/assets/images/${a}/${t}.jpg`,e.setStatePhotoTagBlock(!0),N()}else if(e.setStatePhotoTagBlock(!1),N(),""!==e.data.settingsInputsStatus.sourceTagInput&&(a=e.data.settingsInputsStatus.sourceTagInput),"unsplash"===t){const e=`https://api.unsplash.com/photos/random?orientation=landscape&query=${a}&client_id=aoX0rDfQk1G2xigkewYXnpqSgjlV1kHW8YLBVAT5CkY`,t=await fetch(e),n=await t.json();o.src=n.urls.regular}else if("flickr"===t){let e=X(100);const t=`https://www.flickr.com/services/rest/?method=flickr.photos.search&api_key=b71a9c1cb303457bc8491e750660b116&orientation=landscape&tags=${a}&extras=url_h,%20url_l&format=json&nojsoncallback=1`,n=await fetch(t),s=await n.json();console.log(t),s.photos.photo[e].url_h?o.src=s.photos.photo[e].url_h:o.src=s.photos.photo[e].url_l}o.onload=()=>{V.style.backgroundImage=`url(${o.src})`}}const J=document.querySelector(".slide-prev"),K=document.querySelector(".slide-next");function O(){K.disabled=!0,J.disabled=!0}function Z(){setTimeout((function(){K.disabled=!1,J.disabled=!1}),1500)}const ee=[{author:"Sensorica",title:"Aqua Caelestis",src:"../assets/sounds/Aqua Caelestis.mp3",duration:"00:40"},{author:"Yiruma",title:"River Flows In You",src:"../assets/sounds/River Flows In You.mp3",duration:"01:37"},{author:"Summer Wind",title:"Summer Wind",src:"../assets/sounds/Summer Wind.mp3",duration:"01:51"},{author:"Ennio Morricone",title:"Ennio Morricone",src:"../assets/sounds/Ennio Morricone.mp3",duration:"01:37"}],te=document.querySelector(".play-current"),ae=document.querySelector(".play-next"),oe=document.querySelector(".play-prev"),ne=new Audio,se=document.querySelector(".play-list"),ce=document.querySelector(".progress-bar-track-name");let re,ue=!1,ie=0;function de(){ne.src=ee[ie].src,ne.currentTime=0,ce.textContent=`${ie+1}. ${ee[ie].author} - ${ee[ie].title}`}function le(){ne.currentTime||de(),ne.play(),pe(),te.classList.add("pause"),re.classList.add("pause"),ue=!0}function ge(){ne.pause(),ne.currentTime=0,te.classList.remove("pause"),re.classList.remove("pause"),ue=!1}function he(){ue?(ne.pause(),te.classList.remove("pause"),re.classList.remove("pause"),ue=!1):le()}function me(){ge(),ie<ee.length-1?ie++:ie=0,pe(),le()}function Se(){this.dataset.trackNumber==ie?he():(ge(),ie=+this.dataset.trackNumber,pe(),le())}function pe(){const e=se.querySelectorAll("li");e.forEach((e=>{e.classList.remove("item-active"),e.lastChild.classList.remove("pause"),e.lastChild.classList.remove("play-little")})),e[ie].classList.add("item-active"),e[ie].lastChild.classList.add("play-little"),re=document.querySelector(".play-little"),re.classList.add("pause")}const ye=document.querySelector(".progress-bar"),ve=document.querySelector(".progress-current"),Le=document.querySelector(".progress-total");function ke(e,t=0){e.style.background=`linear-gradient(to right, rgba(255, 255, 255, 0.8) 0%, rgba(255, 255, 255, 0.8) ${t}%, transparent ${t}%, transparent 100%)`}function fe(e){e=Math.round(e);let t=Math.floor(e/60)||0,a=e-60*t||0;return t+":"+(a<10?"0":"")+a}ye.value=0;const qe=document.querySelector(".mute-btn"),we=document.querySelector(".volume-bar");let Ie=0;function Ee(e,t,a){localStorage.getItem(t)?"true"===localStorage.getItem(t)?(e.checked=!0,a.classList.remove("visibility-hidden")):(e.checked=!1,a.classList.add("visibility-hidden")):(e.checked=!0,a.classList.remove("visibility-hidden"))}"russian"===localStorage.getItem("language")?(e.setStateLanguage("russian"),q.checked=!1,w.checked=!0):(e.setStateLanguage("english"),w.checked=!1,q.checked=!0),localStorage.getItem("userName")?e.setStateUserName(localStorage.getItem("userName")):e.setStateUserName(""),_.value=e.data.userName,localStorage.getItem("city")?(e.setStateCity(localStorage.getItem("city")),u.value=e.data.city):"russian"===e.data.language?u.value="Минск":u.value="Minsk",localStorage.getItem("photoSource")?e.setStatePhotoSource(localStorage.getItem("photoSource")):e.setStatePhotoSource("github"),"unsplash"===e.data.photoSource?(I.checked=!1,b.checked=!1,E.checked=!0):"flickr"===e.data.photoSource?(I.checked=!1,E.checked=!1,b.checked=!0):(E.checked=!1,b.checked=!1,I.checked=!0),localStorage.getItem("sourceTagInput")?e.setStatePhotoTag(localStorage.getItem("sourceTagInput")):e.setStatePhotoTag(""),T.value=e.data.settingsInputsStatus.sourceTagInput,localStorage.getItem("sourceTagInputBlock")?e.setStatePhotoTagBlock(localStorage.getItem("sourceTagInputBlock")):e.setStatePhotoTagBlock(!1),Ee(C,"weatherHideButton",p),Ee(x,"playerHideButton",y),Ee(B,"timeHideButton",v),Ee(P,"dateHideButton",L),Ee($,"greetingHideButton",k),Ee(H,"quotesHideButton",f),window.addEventListener("beforeunload",(function(){localStorage.setItem("city",e.data.city),localStorage.setItem("language",e.data.language),localStorage.setItem("photoSource",e.data.photoSource),localStorage.setItem("userName",e.data.userName),localStorage.setItem("sourceTagInput",e.data.settingsInputsStatus.sourceTagInput),localStorage.setItem("sourceTagInputBlock",e.data.settingsInputsStatus.sourceTagInputBlock),localStorage.setItem("weatherHideButton",C.checked),localStorage.setItem("playerHideButton",x.checked),localStorage.setItem("timeHideButton",B.checked),localStorage.setItem("dateHideButton",P.checked),localStorage.setItem("greetingHideButton",$.checked),localStorage.setItem("quotesHideButton",H.checked)})),V.style.backgroundImage="url('https://raw.githubusercontent.com/anticher/stage1-tasks/assets/images/evening/18.jpg')",window.addEventListener("load",(()=>{z(e.data.photoSource)})),window.addEventListener("load",(()=>{U(e.data.language)})),K.addEventListener("click",(()=>{var t;t=e.data.photoSource,Y<20?Y++:Y=1,O(),z(t),Z()})),J.addEventListener("click",(()=>{var t;t=e.data.photoSource,Y>1?Y--:Y=20,O(),z(t),Z()})),window.addEventListener("load",(ee.forEach(((e,t)=>{const a=document.createElement("li");a.classList.add("play-item"),a.textContent=ee[t].title;const o=document.createElement("button");o.classList.add("play"),o.classList.add("player-icon"),o.dataset.trackNumber=t,0===t&&o.classList.add("play-little"),o.addEventListener("click",Se),a.append(o),se.append(a)})),de(),void(re=document.querySelector(".play-little")))),te.addEventListener("click",he),ae.addEventListener("click",me),oe.addEventListener("click",(function(){ge(),ie>0?ie--:ie=ee.length-1,pe(),le()})),ne.addEventListener("ended",me),ke(ye),ne.ontimeupdate=()=>{ve.textContent=fe(ne.currentTime),Le.textContent=fe(ne.duration),ne.duration===ne.currentTime&&pauseAudio(),0===ne.currentTime?ke(ye):(ye.value=100/ne.duration*ne.currentTime,ke(ye,ye.value))},ye.addEventListener("input",(function(){const e=this.value;ne.currentTime=e/(100/ne.duration),ke(ye)})),qe.addEventListener("click",(function(){qe.classList.contains("muted")?(qe.classList.remove("muted"),we.value=Ie,ke(we,Ie),ne.volume=Ie/100):(qe.classList.add("muted"),Ie=we.value,we.value=0,ke(we),ne.volume=0)})),ne.volume=we.value/100,ke(we,we.value),we.addEventListener("input",(function(){const e=this.value;ke(we,e),ne.volume=e/100,Ie=e,e>0?qe.classList.remove("muted"):qe.classList.add("muted")})),window.addEventListener("load",(()=>{i(e.data.weatherLanguage)})),u.addEventListener("change",(()=>{i(e.data.weatherLanguage)})),window.addEventListener("load",(()=>{h(e.data.language)})),g.addEventListener("click",(()=>{h(e.data.language)})),window.addEventListener("load",N),m.addEventListener("click",(function(){m.classList.toggle("active"),S.classList.toggle("active")})),q.addEventListener("click",M),w.addEventListener("click",M),I.addEventListener("click",G),E.addEventListener("click",G),b.addEventListener("click",G),T.addEventListener("change",(function(){e.setStatePhotoTag(T.value),z(e.data.photoSource)})),C.addEventListener("change",(function(){j(this,p)})),x.addEventListener("change",(function(){j(this,y)})),B.addEventListener("change",(function(){j(this,v)})),P.addEventListener("change",(function(){j(this,L)})),$.addEventListener("change",(function(){j(this,k)})),H.addEventListener("change",(function(){j(this,f)}))})();