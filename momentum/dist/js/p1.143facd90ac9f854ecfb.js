(()=>{"use strict";var e={d:(t,n)=>{for(var o in n)e.o(n,o)&&!e.o(t,o)&&Object.defineProperty(t,o,{enumerable:!0,get:n[o]})},o:(e,t)=>Object.prototype.hasOwnProperty.call(e,t)};e.d({},{d:()=>J});const t={english:{"Good Day":"Good day","Good Evening":"Good evening","Good Night":"Good night","Good Morning":"Good morning",PlaceHolder:"[Enter name]"},russian:{"Good Day":"Добрый день","Good Evening":"Добрый вечер","Good Night":"Доброй ночи","Good Morning":"Добоей утро",PlaceHolder:"[Введите имя]"}},n=document.querySelector(".date"),o=document.querySelector(".time"),a=document.querySelector(".greeting"),r=document.querySelector(".name");let s,c=new Date;function i(){const e=(new Date).toLocaleTimeString();o.textContent=e,setTimeout(i,1e3)}function u(){const e=c.getHours();return e<=5?"Night":e<=11?"Morning":e<=17?"Day":e<=23?"Evening":void 0}i();const l=document.querySelector("body");function d(){s||(s=Math.floor(20*Math.random())+1);const e=s.toString().padStart(2,"0"),t=u().toLowerCase(),n=new Image;n.src=`https://raw.githubusercontent.com/rolling-scopes-school/stage1-tasks/assets/images/${t}/${e}.jpg`,n.onload=()=>{l.style.backgroundImage=`url(${n.src})`}}l.style.backgroundImage="url('https://raw.githubusercontent.com/rolling-scopes-school/stage1-tasks/assets/images/evening/18.jpg')";const m=document.querySelector(".slide-prev");document.querySelector(".slide-next").addEventListener("click",(function(){s<20?s++:s=1,d()})),m.addEventListener("click",(function(){s>1?s--:s=20,d()}));const p=document.querySelector(".quote"),v=document.querySelector(".author");async function g(){const e=`../assets/data/${J}QuotesData.json`,t=await fetch(e),n=await t.json(),o=(a=n.length,Math.floor(Math.random()*a));var a;p.textContent=n[o].text,v.textContent=n[o].author}document.querySelector(".change-quote").addEventListener("click",g);const y=document.querySelector(".weather-icon"),h=document.querySelector(".temperature"),L=document.querySelector(".weather-description"),f=document.querySelector(".city");async function S(){f.value||(f.value="Minsk");const e=`https://api.openweathermap.org/data/2.5/weather?q=${f.value}&lang=ru&appid=abe902bf94114fcd5fea4eb6170592ab&units=metric`,t=await fetch(e),n=await t.json();y.className="weather-icon owf",y.classList.add(`owf-${n.weather[0].id}`),h.textContent=`${n.main.temp}°C`,L.textContent=n.weather[0].description}f.addEventListener("change",S);const w=[{author:"Sensorica",title:"Aqua Caelestis",src:"../assets/sounds/Aqua Caelestis.mp3",duration:"00:40"},{author:"Yiruma",title:"River Flows In You",src:"../assets/sounds/River Flows In You.mp3",duration:"01:37"},{author:"Summer Wind",title:"Summer Wind",src:"../assets/sounds/Summer Wind.mp3",duration:"01:51"},{author:"Ennio Morricone",title:"Ennio Morricone",src:"../assets/sounds/Ennio Morricone.mp3",duration:"01:37"}],q=document.querySelector(".play-current"),E=document.querySelector(".play-next"),b=document.querySelector(".play-prev"),k=document.querySelector(".play-list"),C=new Audio,x=document.querySelector(".progress-bar-track-name");let G,M=!1,$=0;function T(){C.src=w[$].src,C.currentTime=0,x.textContent=`${$+1}. ${w[$].author} - ${w[$].title}`}function D(){C.currentTime||T(),C.play(),H(),q.classList.add("pause"),G.classList.add("pause"),M=!0}function I(){C.pause(),q.classList.remove("pause"),G.classList.remove("pause"),M=!1}function j(){C.pause(),C.currentTime=0,q.classList.remove("pause"),G.classList.remove("pause"),M=!1}function N(){M?I():D()}function P(){j(),$<w.length-1?$++:$=0,H(),D()}function A(){this.dataset.trackNumber==$?N():(j(),$=+this.dataset.trackNumber,H(),D())}function H(){const e=k.querySelectorAll("li");e.forEach((e=>{e.classList.remove("item-active"),e.lastChild.classList.remove("pause"),e.lastChild.classList.remove("play-little")})),e[$].classList.add("item-active"),e[$].lastChild.classList.add("play-little"),G=document.querySelector(".play-little"),G.classList.add("pause")}q.addEventListener("click",N),E.addEventListener("click",P),b.addEventListener("click",(function(){j(),$>0?$--:$=w.length-1,H(),D()})),C.addEventListener("ended",P);const O=document.querySelector(".progress-bar"),R=document.querySelector(".progress-current"),W=document.querySelector(".progress-total");function Y(e,t=0){e.style.background=`linear-gradient(to right, rgba(255, 255, 255, 0.8) 0%, rgba(255, 255, 255, 0.8) ${t}%, transparent ${t}%, transparent 100%)`}function F(e){e=Math.round(e);let t=Math.floor(e/60)||0,n=e-60*t||0;return t+":"+(n<10?"0":"")+n}O.value=0,Y(O),C.ontimeupdate=()=>{R.textContent=F(C.currentTime),W.textContent=F(C.duration),C.duration===C.currentTime&&I(),0===C.currentTime?Y(O):(O.value=100/C.duration*C.currentTime,Y(O,O.value))},O.addEventListener("input",(function(){const e=this.value;C.currentTime=e/(100/C.duration),Y(O)}));const Q=document.querySelector(".mute-btn"),z=document.querySelector(".volume-bar");let B=0;Q.addEventListener("click",(function(){Q.classList.contains("muted")?(Q.classList.remove("muted"),z.value=B,Y(z,B),C.volume=B/100):(Q.classList.add("muted"),B=z.value,z.value=0,Y(z),C.volume=0)})),C.volume=z.value/100,Y(z,z.value),z.addEventListener("input",(function(){const e=this.value;Y(z,e),C.volume=e/100,B=e,e>0?Q.classList.remove("muted"):Q.classList.add("muted")}));let J="russian";w.forEach(((e,t)=>{const n=document.createElement("li");n.classList.add("play-item"),n.textContent=w[t].title;const o=document.createElement("button");o.classList.add("play"),o.classList.add("player-icon"),o.dataset.trackNumber=t,0===t&&o.classList.add("play-little"),o.addEventListener("click",A),n.append(o),k.append(n)})),T(),G=document.querySelector(".play-little"),window.addEventListener("load",(function(){localStorage.getItem("name")?r.value=localStorage.getItem("name"):r.value=""})),window.addEventListener("beforeunload",(function(){localStorage.setItem("name",r.value)})),window.addEventListener("load",S),window.addEventListener("load",(function(){i(),function(e){const n=`Good ${u()}`;a.textContent=t[e][n],r.placeholder=t[e].PlaceHolder}(J),function(e){const t={weekday:"long",month:"long",day:"numeric"};if("english"===e){const e=c.toLocaleDateString("en-En",t);n.textContent=e}else if("russian"===e){const e=c.toLocaleDateString("ru-Ru",t);n.textContent=e}}(J)})),window.addEventListener("load",d),window.addEventListener("load",g())})();