(()=>{"use strict";let e={data:{language:"",weatherLanguage:"",photoSource:"",userName:"",city:"",settingsInputsStatus:{sourceTagInput:"",sourceTagInputBlock:!1}},setStateLanguage(e){"russian"===e?(this.data.language="russian",this.data.weatherLanguage="ru"):(this.data.language="english",this.data.weatherLanguage="en")},setStateUserName(e){this.data.userName=e},setStateCity(e){this.data.city=e},setStatePhotoSource(e){this.data.photoSource=e,console.log(this.data.photoSource)},setStatePhotoTag(e){this.data.settingsInputsStatus.sourceTagInput=e,console.log(this.data.settingsInputsStatus.sourceTagInput)},setStatePhotoTagBlock(e){this.data.settingsInputsStatus.sourceTagInputBlock=e}};const t={english:{"Good Afternoon":"Good afternoon","Good Evening":"Good evening","Good Night":"Good night","Good Morning":"Good morning",PlaceHolder:"[Enter name]"},russian:{"Good Afternoon":"Добрый день","Good Evening":"Добрый вечер","Good Night":"Доброй ночи","Good Morning":"Доброе утро",PlaceHolder:"[Введите имя]"}},o=document.querySelector(".weather-icon"),a=document.querySelector(".temperature"),n=document.querySelector(".wind"),c=document.querySelector(".humidity"),s=document.querySelector(".weather-description"),r=document.querySelector(".weather-error"),u=document.querySelector(".city");async function i(e){const t=`https://api.openweathermap.org/data/2.5/weather?q=${u.value}&lang=${e}&appid=abe902bf94114fcd5fea4eb6170592ab&units=metric`,i=await fetch(t),d=await i.json();d.cod>=400?(r.textContent="ru"===e?"Название города введено некорректно":"Wrong city name",o.className="",n.textContent="",c.textContent="",a.textContent="",s.textContent=""):(r.textContent="",o.className="weather-icon owf",o.classList.add(`owf-${d.weather[0].id}`),a.textContent=`${Math.ceil(d.main.temp)}°C`,s.textContent=d.weather[0].description,"en"===e?(n.textContent=`Wind speed: ${Math.ceil(d.wind.speed)} m/s`,c.textContent=`Humidity: ${d.main.humidity}%`):"ru"===e&&(n.textContent=`Скорость ветра: ${Math.ceil(d.wind.speed)} м/с`,c.textContent=`Влажность: ${d.main.humidity}%`))}const d=document.querySelector(".quote"),l=document.querySelector(".author"),g=document.querySelector(".change-quote");async function m(e){const t=`../assets/data/${e}QuotesData.json`,o=await fetch(t),a=await o.json(),n=(c=a.length,Math.floor(Math.random()*c));var c;d.textContent=a[n].text,l.textContent=a[n].author}const h=document.querySelector(".settings-button"),S=document.querySelector(".settings-window"),p=document.querySelector(".weather"),y=document.querySelector(".player"),v=document.querySelector(".time"),k=document.querySelector(".date"),L=document.querySelector(".greeting-container"),f=document.querySelector(".quotes"),I=document.querySelector("#radioLanguageEnglish"),q=document.querySelector("#radioLanguageRussian"),w=document.querySelector("#radioGitHub"),E=document.querySelector("#radioUnsplash"),b=document.querySelector("#radioFlickr"),T=document.querySelector("#inputTag"),C=document.querySelector("#checkWeather"),x=document.querySelector("#checkPlayer"),$=document.querySelector("#checkTime"),B=document.querySelector("#checkDate"),P=document.querySelector("#checkGreeting"),H=document.querySelector("#checkQuotes");function N(){!0===e.data.settingsInputsStatus.sourceTagInputBlock?(T.disabled=!0,T.value="",e.setStatePhotoTag(T.value)):T.disabled=!1}function G(){this===b?e.setStatePhotoSource("flickr"):this===E?e.setStatePhotoSource("unsplash"):e.setStatePhotoSource("github"),z(e.data.photoSource)}function M(){this===q?e.setStateLanguage("russian"):e.setStateLanguage("english"),R(e.data.language),i(e.data.weatherLanguage),m(e.data.language)}function j(e,t){e.checked?t.classList.remove("visibility-hidden"):t.classList.add("visibility-hidden")}const A=document.querySelector(".date"),D=document.querySelector(".time"),W=document.querySelector(".greeting"),_=document.querySelector(".name");let Y,F=new Date;function R(e){U(),function(e){const o=`Good ${Q()}`;W.textContent=t[e][o],_.placeholder=t[e].PlaceHolder}(e),function(e){const t={weekday:"long",month:"long",day:"numeric"};if("english"===e){const e=F.toLocaleDateString("en-En",t);A.textContent=e}else if("russian"===e){const e=F.toLocaleDateString("ru-Ru",t);A.textContent=e}}(e)}function U(){const e=(new Date).toLocaleTimeString();D.textContent=e,setTimeout(U,1e3)}function Q(){const e=F.getHours();return e<=5?"Night":e<=11?"Morning":e<=17?"Afternoon":e<=23?"Evening":void 0}const V=document.querySelector("body");function X(e){return Math.floor(Math.random()*e)+1}async function z(t){let o=Q().toLowerCase();const a=new Image;if(Y||(Y=X(20)),"github"===t){const t=Y.toString().padStart(2,"0");a.src=`https://raw.githubusercontent.com/anticher/stage1-tasks/assets/images/${o}/${t}.jpg`,e.setStatePhotoTagBlock(!0),N()}else if(e.setStatePhotoTagBlock(!1),N(),""!==e.data.settingsInputsStatus.sourceTagInput&&(o=e.data.settingsInputsStatus.sourceTagInput),"unsplash"===t){const e=`https://api.unsplash.com/photos/random?orientation=landscape&query=${o}&client_id=aoX0rDfQk1G2xigkewYXnpqSgjlV1kHW8YLBVAT5CkY`,t=await fetch(e),n=await t.json();a.src=n.urls.regular,console.log(e)}else if("flickr"===t){let e=X(100);const t=`https://www.flickr.com/services/rest/?method=flickr.photos.search&api_key=b71a9c1cb303457bc8491e750660b116&orientation=landscape&tags=${o}&extras=url_h,%20url_l&format=json&nojsoncallback=1`,n=await fetch(t),c=await n.json();console.log(t),c.photos.photo[e].url_l?a.src=c.photos.photo[e].url_l:a.src=c.photos.photo[e].url_h}a.onload=()=>{V.style.backgroundImage=`url(${a.src})`}}const J=document.querySelector(".slide-prev"),K=document.querySelector(".slide-next");function O(){K.disabled=!0,J.disabled=!0}function Z(){setTimeout((function(){K.disabled=!1,J.disabled=!1}),1500)}const ee=[{author:"Sensorica",title:"Aqua Caelestis",src:"../assets/sounds/Aqua Caelestis.mp3",duration:"00:40"},{author:"Yiruma",title:"River Flows In You",src:"../assets/sounds/River Flows In You.mp3",duration:"01:37"},{author:"Summer Wind",title:"Summer Wind",src:"../assets/sounds/Summer Wind.mp3",duration:"01:51"},{author:"Ennio Morricone",title:"Ennio Morricone",src:"../assets/sounds/Ennio Morricone.mp3",duration:"01:37"}],te=document.querySelector(".play-current"),oe=document.querySelector(".play-next"),ae=document.querySelector(".play-prev"),ne=new Audio,ce=document.querySelector(".play-list"),se=document.querySelector(".progress-bar-track-name");let re,ue=!1,ie=0;function de(){ne.src=ee[ie].src,ne.currentTime=0,se.textContent=`${ie+1}. ${ee[ie].author} - ${ee[ie].title}`}function le(){ne.currentTime||de(),ne.play(),pe(),te.classList.add("pause"),re.classList.add("pause"),ue=!0}function ge(){ne.pause(),ne.currentTime=0,te.classList.remove("pause"),re.classList.remove("pause"),ue=!1}function me(){ue?(ne.pause(),te.classList.remove("pause"),re.classList.remove("pause"),ue=!1):le()}function he(){ge(),ie<ee.length-1?ie++:ie=0,pe(),le()}function Se(){this.dataset.trackNumber==ie?me():(ge(),ie=+this.dataset.trackNumber,pe(),le())}function pe(){const e=ce.querySelectorAll("li");e.forEach((e=>{e.classList.remove("item-active"),e.lastChild.classList.remove("pause"),e.lastChild.classList.remove("play-little")})),e[ie].classList.add("item-active"),e[ie].lastChild.classList.add("play-little"),re=document.querySelector(".play-little"),re.classList.add("pause")}const ye=document.querySelector(".progress-bar"),ve=document.querySelector(".progress-current"),ke=document.querySelector(".progress-total");function Le(e,t=0){e.style.background=`linear-gradient(to right, rgba(255, 255, 255, 0.8) 0%, rgba(255, 255, 255, 0.8) ${t}%, transparent ${t}%, transparent 100%)`}function fe(e){e=Math.round(e);let t=Math.floor(e/60)||0,o=e-60*t||0;return t+":"+(o<10?"0":"")+o}ye.value=0;const Ie=document.querySelector(".mute-btn"),qe=document.querySelector(".volume-bar");let we=0;const Ee=document.querySelector(".todos-button"),be=document.querySelector(".todos-input"),Te=document.querySelector(".todos-output"),Ce=document.querySelector(".todos-window");let xe=1;function $e(e,t){const o=document.createElement("div");o.classList.add("todos-item"),o.id=`todosItem${xe}`;const a=document.createElement("input");a.type="checkbox",a.classList.add("todos-checkbox"),a.id=`todosCheckbox${xe}`,a.name="checkTodo",a.checked="true"===t,a.addEventListener("click",Be);const n=document.createElement("label");n.classList.add("todos-label"),n.htmlFor=`todosCheckbox${xe}`,n.textContent=e;const c=document.createElement("button");c.textContent="delete",c.classList.add("todos-delete"),c.id=`todosDelete${xe}`,c.type="button";let s=(r=xe,function(){document.querySelector(`#todosItem${r}`).remove(),function(e){localStorage.removeItem(`todoItem${e}`),localStorage.removeItem(`todoItemStatus${e}`)}(r)});var r;c.addEventListener("click",(()=>{s(),console.log(xe)})),o.append(a),o.append(n),o.append(c),Te.append(o),function(e,t){localStorage.setItem(`todoItem${e}`,t)}(xe,e),Pe(xe,"true"===t),xe++}function Be(){let e=this.id.split("").splice(13).join("");console.log(e),!0===this.checked?(Pe(e,!0),console.log("click")):(console.log("unclick"),Pe(e,!1))}function Pe(e,t){localStorage.setItem(`todoItemStatus${e}`,t)}function He(e,t,o){localStorage.getItem(t)?"true"===localStorage.getItem(t)?(e.checked=!0,o.classList.remove("visibility-hidden")):(e.checked=!1,o.classList.add("visibility-hidden")):(e.checked=!0,o.classList.remove("visibility-hidden"))}!function(){if("russian"===localStorage.getItem("language")?(e.setStateLanguage("russian"),I.checked=!1,q.checked=!0):(e.setStateLanguage("english"),q.checked=!1,I.checked=!0),localStorage.getItem("userName")?e.setStateUserName(localStorage.getItem("userName")):e.setStateUserName(""),_.value=e.data.userName,localStorage.getItem("city")?(e.setStateCity(localStorage.getItem("city")),u.value=e.data.city):"russian"===e.data.language?u.value="Минск":u.value="Minsk",localStorage.getItem("photoSource")?e.setStatePhotoSource(localStorage.getItem("photoSource")):e.setStatePhotoSource("github"),"unsplash"===e.data.photoSource?(w.checked=!1,b.checked=!1,E.checked=!0):"flickr"===e.data.photoSource?(w.checked=!1,E.checked=!1,b.checked=!0):(E.checked=!1,b.checked=!1,w.checked=!0),localStorage.getItem("sourceTagInput")?e.setStatePhotoTag(localStorage.getItem("sourceTagInput")):e.setStatePhotoTag(""),T.value=e.data.settingsInputsStatus.sourceTagInput,localStorage.getItem("sourceTagInputBlock")?e.setStatePhotoTagBlock(localStorage.getItem("sourceTagInputBlock")):e.setStatePhotoTagBlock(!1),He(C,"weatherHideButton",p),He(x,"playerHideButton",y),He($,"timeHideButton",v),He(B,"dateHideButton",k),He(P,"greetingHideButton",L),He(H,"quotesHideButton",f),localStorage.getItem("todosCounter")){let e=localStorage.getItem("todosCounter");for(let t=1;t<e;t++)localStorage.getItem(`todoItem${t}`)&&$e(localStorage.getItem(`todoItem${t}`),localStorage.getItem(`todoItemStatus${t}`))}}(),window.addEventListener("beforeunload",(function(){localStorage.setItem("city",e.data.city),localStorage.setItem("language",e.data.language),localStorage.setItem("photoSource",e.data.photoSource),localStorage.setItem("userName",e.data.userName),localStorage.setItem("sourceTagInput",e.data.settingsInputsStatus.sourceTagInput),localStorage.setItem("sourceTagInputBlock",e.data.settingsInputsStatus.sourceTagInputBlock),localStorage.setItem("weatherHideButton",C.checked),localStorage.setItem("playerHideButton",x.checked),localStorage.setItem("timeHideButton",$.checked),localStorage.setItem("dateHideButton",B.checked),localStorage.setItem("greetingHideButton",P.checked),localStorage.setItem("quotesHideButton",H.checked),localStorage.setItem("todosCounter",xe)})),V.style.backgroundImage="url('https://raw.githubusercontent.com/anticher/stage1-tasks/assets/images/evening/18.jpg')",window.addEventListener("load",(()=>{z(e.data.photoSource)})),window.addEventListener("load",(()=>{R(e.data.language)})),K.addEventListener("click",(()=>{var t;t=e.data.photoSource,Y<20?Y++:Y=1,O(),z(t),Z()})),J.addEventListener("click",(()=>{var t;t=e.data.photoSource,Y>1?Y--:Y=20,O(),z(t),Z()})),window.addEventListener("load",(ee.forEach(((e,t)=>{const o=document.createElement("li");o.classList.add("play-item"),o.textContent=ee[t].title;const a=document.createElement("button");a.classList.add("play"),a.classList.add("player-icon"),a.dataset.trackNumber=t,0===t&&a.classList.add("play-little"),a.addEventListener("click",Se),o.append(a),ce.append(o)})),de(),void(re=document.querySelector(".play-little")))),te.addEventListener("click",me),oe.addEventListener("click",he),ae.addEventListener("click",(function(){ge(),ie>0?ie--:ie=ee.length-1,pe(),le()})),ne.addEventListener("ended",he),Le(ye),ne.ontimeupdate=()=>{ve.textContent=fe(ne.currentTime),ke.textContent=fe(ne.duration),ne.duration===ne.currentTime&&pauseAudio(),0===ne.currentTime?Le(ye):(ye.value=100/ne.duration*ne.currentTime,Le(ye,ye.value))},ye.addEventListener("input",(function(){const e=this.value;ne.currentTime=e/(100/ne.duration),Le(ye)})),Ie.addEventListener("click",(function(){Ie.classList.contains("muted")?(Ie.classList.remove("muted"),qe.value=we,Le(qe,we),ne.volume=we/100):(Ie.classList.add("muted"),we=qe.value,qe.value=0,Le(qe),ne.volume=0)})),ne.volume=qe.value/100,Le(qe,qe.value),qe.addEventListener("input",(function(){const e=this.value;Le(qe,e),ne.volume=e/100,we=e,e>0?Ie.classList.remove("muted"):Ie.classList.add("muted")})),window.addEventListener("load",(()=>{i(e.data.weatherLanguage)})),u.addEventListener("change",(()=>{i(e.data.weatherLanguage)})),window.addEventListener("load",(()=>{m(e.data.language)})),g.addEventListener("click",(()=>{m(e.data.language)})),window.addEventListener("load",N),h.addEventListener("click",(function(){h.classList.toggle("active"),S.classList.toggle("active")})),Ee.addEventListener("click",(function(){Ce.classList.toggle("active")})),be.addEventListener("change",(()=>{$e(be.value,!1),be.value=""})),I.addEventListener("click",M),q.addEventListener("click",M),w.addEventListener("click",G),E.addEventListener("click",G),b.addEventListener("click",G),T.addEventListener("change",(function(){e.setStatePhotoTag(T.value),z(e.data.photoSource)})),C.addEventListener("change",(function(){j(this,p)})),x.addEventListener("change",(function(){j(this,y)})),$.addEventListener("change",(function(){j(this,v)})),B.addEventListener("change",(function(){j(this,k)})),P.addEventListener("change",(function(){j(this,L)})),H.addEventListener("change",(function(){j(this,f)}))})();