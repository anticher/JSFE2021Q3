(()=>{"use strict";const e=document.querySelector(".date"),t=document.querySelector(".time"),n=document.querySelector(".greeting"),o=document.querySelector(".name");let a,s=new Date;function r(){const e=s.getHours();return e<=5?"Night":e<=11?"Morning":e<=17?"Day":e<=23?"Evening":void 0}const c=document.querySelector("body");function i(){a||(a=Math.floor(20*Math.random())+1);const e=a.toString().padStart(2,"0"),t=r().toLowerCase(),n=new Image;n.src=`https://raw.githubusercontent.com/rolling-scopes-school/stage1-tasks/assets/images/${t}/${e}.jpg`,n.onload=()=>{c.style.backgroundImage=`url(${n.src})`}}c.style.backgroundImage="url('https://raw.githubusercontent.com/rolling-scopes-school/stage1-tasks/assets/images/evening/18.jpg')";const u=document.querySelector(".slide-prev");document.querySelector(".slide-next").addEventListener("click",(function(){a<20?a++:a=1,i()})),u.addEventListener("click",(function(){a>1?a--:a=20,i()}));const l=document.querySelector(".quote"),d=document.querySelector(".author");async function m(){const e=await fetch("../assets/data/quotesData.json"),t=await e.json(),n=(o=t.length,Math.floor(Math.random()*o));var o;l.textContent=t[n].text,d.textContent=t[n].author}document.querySelector(".change-quote").addEventListener("click",m);const p=document.querySelector(".weather-icon"),v=document.querySelector(".temperature"),y=document.querySelector(".weather-description"),g=document.querySelector(".city");async function h(){g.value||(g.value="Minsk");const e=`https://api.openweathermap.org/data/2.5/weather?q=${g.value}&lang=ru&appid=abe902bf94114fcd5fea4eb6170592ab&units=metric`,t=await fetch(e),n=await t.json();p.className="weather-icon owf",p.classList.add(`owf-${n.weather[0].id}`),v.textContent=`${n.main.temp}Â°C`,y.textContent=n.weather[0].description}g.addEventListener("change",h);const L=[{author:"Sensorica",title:"Aqua Caelestis",src:"../assets/sounds/Aqua Caelestis.mp3",duration:"00:40"},{author:"Yiruma",title:"River Flows In You",src:"../assets/sounds/River Flows In You.mp3",duration:"01:37"},{author:"Summer Wind",title:"Summer Wind",src:"../assets/sounds/Summer Wind.mp3",duration:"01:51"},{author:"Ennio Morricone",title:"Ennio Morricone",src:"../assets/sounds/Ennio Morricone.mp3",duration:"01:37"}],S=document.querySelector(".play-current"),f=document.querySelector(".play-next"),w=document.querySelector(".play-prev"),q=document.querySelector(".play-list"),E=new Audio,b=document.querySelector(".progress-bar-track-name");let k,C=!1,x=0;function $(){E.src=L[x].src,E.currentTime=0,b.textContent=`${x+1}. ${L[x].author} - ${L[x].title}`}function M(){E.currentTime||$(),E.play(),A(),S.classList.add("pause"),k.classList.add("pause"),C=!0}function T(){E.pause(),S.classList.remove("pause"),k.classList.remove("pause"),C=!1}function I(){E.pause(),E.currentTime=0,S.classList.remove("pause"),k.classList.remove("pause"),C=!1}function j(){C?T():M()}function D(){I(),x<L.length-1?x++:x=0,A(),M()}function N(){this.dataset.trackNumber==x?j():(I(),x=+this.dataset.trackNumber,A(),M())}function A(){const e=q.querySelectorAll("li");e.forEach((e=>{e.classList.remove("item-active"),e.lastChild.classList.remove("pause"),e.lastChild.classList.remove("play-little")})),e[x].classList.add("item-active"),e[x].lastChild.classList.add("play-little"),k=document.querySelector(".play-little"),k.classList.add("pause")}S.addEventListener("click",j),f.addEventListener("click",D),w.addEventListener("click",(function(){I(),x>0?x--:x=L.length-1,A(),M()})),E.addEventListener("ended",D);const W=document.querySelector(".progress-bar"),Y=document.querySelector(".progress-current"),F=document.querySelector(".progress-total");function R(e,t=0){e.style.background=`linear-gradient(to right, rgba(255, 255, 255, 0.8) 0%, rgba(255, 255, 255, 0.8) ${t}%, transparent ${t}%, transparent 100%)`}function G(e){e=Math.round(e);let t=Math.floor(e/60)||0,n=e-60*t||0;return t+":"+(n<10?"0":"")+n}W.value=0,R(W),E.ontimeupdate=()=>{Y.textContent=G(E.currentTime),F.textContent=G(E.duration),E.duration===E.currentTime&&T(),0===E.currentTime?R(W):(W.value=100/E.duration*E.currentTime,R(W,W.value))},W.addEventListener("input",(function(){const e=this.value;E.currentTime=e/(100/E.duration),R(W)}));const H=document.querySelector(".mute-btn"),z=document.querySelector(".volume-bar");let B=0;H.addEventListener("click",(function(){H.classList.contains("muted")?(H.classList.remove("muted"),z.value=B,R(z,B),E.volume=B/100):(H.classList.add("muted"),B=z.value,z.value=0,R(z),E.volume=0)})),E.volume=z.value/100,R(z,z.value),z.addEventListener("input",(function(){const e=this.value;R(z,e),E.volume=e/100,B=e,e>0?H.classList.remove("muted"):H.classList.add("muted")})),console.log("da"),L.forEach(((e,t)=>{const n=document.createElement("li");n.classList.add("play-item"),n.textContent=L[t].title;const o=document.createElement("button");o.classList.add("play"),o.classList.add("player-icon"),o.dataset.trackNumber=t,0===t&&o.classList.add("play-little"),o.addEventListener("click",N),n.append(o),q.append(n)})),$(),k=document.querySelector(".play-little"),window.addEventListener("load",(function(){localStorage.getItem("name")?o.value=localStorage.getItem("name"):o.value=""})),window.addEventListener("beforeunload",(function(){localStorage.setItem("name",o.value)})),window.addEventListener("load",h),window.addEventListener("load",(function o(){const a=(new Date).toLocaleTimeString(),c=`Good ${r()}`;t.textContent=a,n.textContent=c,function(){const t=s.toLocaleDateString("en-En",{weekday:"long",month:"long",day:"numeric"});e.textContent=t}(),setTimeout(o,1e3)})),window.addEventListener("load",i),window.addEventListener("load",m)})();